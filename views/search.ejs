<% layout('/layouts/boilerplate') %>

<style>
  /* Hero Banner */
  .hero-banner {
    position: relative;
    height: 80vh;
    background: url("https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?auto=format&fit=crop&w=1600&q=80") center/cover no-repeat;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    flex-direction: column;
  }
  .hero-overlay {
    position: absolute;
    top:0; left:0; right:0; bottom:0;
    background: rgba(0,0,0,0.45);
  }
  .hero-content {
    position: relative;
    z-index: 1;
    max-width: 800px;
    padding: 20px;
  }
  .hero-content h1 {
    font-size: 3rem;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.6);
    margin-bottom: 15px;
  }
  .hero-content p {
    margin: 10px 0 20px;
    font-size: 1.2rem;
  }
  .btn {
    padding: 12px 24px;
    background: #FF385C;
    color: white;
    font-weight: bold;
    border-radius: 10px;
    text-decoration: none;
    transition: 0.3s;
    box-shadow: 3px 3px 10px rgba(0,0,0,0.3);
  }
  .btn:hover {
    background: #e31c5f;
    transform: translateY(-3px);
  }

  /* Search Bar */
  .search-bar { 
    background:white; 
    border-radius:50px; 
    padding:14px 25px; 
    margin-top: 30px;
    max-width:950px; 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
    box-shadow:0 4px 20px rgba(0,0,0,0.2); 
    position: relative;
    z-index: 1;
  }
  .search-bar input { 
    font-size:14px; 
    width:100%; 
    padding:8px; 
    border:none; 
    outline:none; 
    border-radius:6px; 
    background: #f7f7f7;
  }
  .search-btn { 
    background:#FF385C; 
    border:none; 
    color:white; 
    font-size:18px; 
    width:45px; 
    height:45px; 
    border-radius:50%; 
    cursor:pointer; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    transition:0.3s; 
  }
  .search-btn:hover { 
    background:#e31c5f; 
    transform: scale(1.1); 
  }

  /* Grid Layout */
  .listings { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
    gap: 25px; 
    padding: 40px; 
    max-width: 1300px; 
    margin: auto; 
  }

  /* Card Design */
  .card { 
    background: #fff; 
    border-radius: 14px; 
    overflow: hidden; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.08); 
    transition: all 0.3s ease; 
    display: flex; 
    flex-direction: column; 
  }
  .card:hover { 
    transform: translateY(-8px); 
    box-shadow: 0 6px 18px rgba(0,0,0,0.15); 
  }
  .card img { 
    width: 100%; 
    height: 200px; 
    object-fit: cover; 
  }
  .card-body { 
    padding: 15px; 
    flex: 1; 
    display: flex; 
    flex-direction: column; 
    justify-content: space-between; 
  }
  .card-body h3 { 
    font-size: 16px; 
    margin: 0 0 6px; 
    font-weight: 600; 
    color: #222; 
  }
  .card-body p { 
    font-size: 13px; 
    margin: 2px 0; 
    color: #666; 
  }
  .price { 
    font-size: 15px; 
    font-weight: bold; 
    color: #FF385C; 
    margin-top: 10px; 
  }
  .card-link { 
    text-decoration: none; 
    color: inherit; 
  }

  /* Heading */
  .results-heading { 
    text-align:center; 
    margin: 50px 0 20px; 
    font-size: 26px; 
    font-weight: bold; 
    color: #333; 
  }
</style>

<!-- Hero Banner -->
<section class="hero-banner">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>Welcome to Your Home Away from Home</h1>
    <p>Find dreamy stays around the world.</p>
    <a href="/listing" class="btn">Explore Listings</a>

    <!-- Search Bar inside Hero -->
    <form class="search-bar" action="/listing/search" method="POST">
      <div style="flex: 1;">
        <label style="font-size: 12px; font-weight: 600; color: #555;">Where</label><br>
        <input type="text" name="country" placeholder="Search by country" required>
      </div>
      <div style="flex: 1;">Check in<br><small>Add dates</small></div>
      <div style="flex: 1;">Check out<br><small>Add dates</small></div>
      <div style="flex: 1;">Who<br><small>Add guests</small></div>
      <button class="search-btn" type="submit">üîç</button>
    </form>
  </div>
</section>

<!-- Search Results Heading -->
<% if (searchCountry) { %>
  <h2 class="results-heading">Showing results for: <%= searchCountry %></h2>
<% } %>

<!-- Property Listings -->
<div class="listings">
  <% if (data && data.length > 0) { %>
    <% data.forEach(list => { %>
      <a href="/listing/view/<%= list._id %>" class="card-link">
        <div class="card">
          <img src="<%= list.image %>" alt="Property Image">
          <div class="card-body">
            <h3><%= list.title %></h3>
            <p><%= list.location %>, <%= list.country %></p>
            <p><%= list.description.substring(0, 60) %>...</p>
            <p class="price">$<%= list.price %> / night</p>
          </div>
        </div>
      </a>
    <% }) %>
  <% } else { %>
    <p style="text-align:center; margin-top:30px; font-size:18px; color:#666;">No listings found.</p>
  <% } %>
</div>
